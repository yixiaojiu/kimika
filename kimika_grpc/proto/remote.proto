syntax = "proto3";
package remote;

service Local {
	// receiver register
	rpc Register(RegisterRequest) returns (RegisterResponse);

	rpc GetReceivers(GetReceiversRequest) returns (GetReceiversResponse);

	rpc Send(stream SendRequest) returns (EmptyResponse);

	rpc Receive(ReceiveRequest) returns (stream ReceiveResponse);
}

message EmptyRequest {
}

message EmptyResponse {
}

message RegisterRequest {
	string alias = 1;
}

message RegisterResponse {
	enum Type {
	File = 0;
	Message = 1;
	}

	// receive content type
	Type type = 1;

	// Identifier used by the receiver to determine to receive
	string id = 2;

	// file byte size
	optional int64 size = 3;

	// file name
	optional string name = 4;
}

message GetReceiversRequest {
	// sender alias
	optional string alias = 1;
}

message GetReceiversResponse {
	message Receivers {
	string alias = 1;
	}

	repeated Receivers receivers = 1;
	}

message SendRequest {
	bytes data = 1;
}

message ReceiveRequest {
	string id = 2;
}

message ReceiveResponse {
	bytes data = 1;
}
